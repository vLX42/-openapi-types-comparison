# OpenAPI Generator Comparison Project

This project compares the **type definitions** generated by two popular OpenAPI/Swagger TypeScript code generators:
- **openapi-typescript** - Generates TypeScript types only (~51 KB)
- **@hey-api/openapi-ts** - Generates types (~20 KB) + optional runtime client code

> **Note**: This comparison focuses on TYPE DEFINITIONS only. While @hey-api can also generate runtime client code, that's optional and excluded from this comparison since both tools can generate types.

## Quick Start

### 1. Generate types from both generators

```bash
npm run gen:all
```

This will generate:
- `output-openapi-typescript/types.ts` - Path-based types (51 KB, 1,535 lines)
- `output-hey-api/types.gen.ts` - Schema-based types (20 KB, 889 lines)
- `output-hey-api/` - Additional client files (optional, can be disabled)

### 2. Compare the type definitions

```bash
npm run compare
```

This shows:
- **Type file sizes and structure**
- **Organization differences** (path-based vs schema-based)
- **Usage examples** for both approaches
- **Type safety comparison**

### Key Finding

**@hey-api generates 61% LESS type definition code** (20 KB vs 51 KB) because:
- Flat structure vs nested paths
- Direct schema types vs full request/response context
- More concise type syntax

### 3. Full comparison (generate + compare)

```bash
npm run full-compare
```

Generates both outputs and runs the type comparison.

## Additional Comparisons

### View code samples side-by-side

```bash
npm run compare:samples
```

### View statistics including client code

```bash
npm run compare:stats
```

Shows full file counts including runtime client code.

### View detailed comparison with client code

```bash
npm run compare:full
```

Shows all generated files, not just types.

## Individual Commands

Generate only openapi-typescript output:
```bash
npm run gen:openapi-typescript
```

Generate only @hey-api/openapi-ts output:
```bash
npm run gen:hey-api
```

## Source File

The project uses `swagger.json` as the source OpenAPI specification. This is a real-world API spec (MVS Api 5.0) that provides a comprehensive comparison.

## Output Directories

- **output-openapi-typescript/** - Contains types.ts file with TypeScript definitions
- **output-hey-api/** - Contains multiple files including types, services, and SDK

## Type Generation Approaches

### openapi-typescript (51 KB)
- âœ“ **Path-based organization** - Types mirror OpenAPI endpoint structure
- âœ“ **Full request/response context** - Complete type information per endpoint
- âœ“ **Nested structure** - `paths['/api/endpoint']['post']['requestBody']`
- âœ“ **Uses interfaces** - TypeScript interfaces for objects
- âœ“ **More verbose** - Includes all endpoint metadata

**Best for**: When you need complete endpoint context and prefer explicit types.

### @hey-api/openapi-ts (20 KB)
- âœ“ **Schema-based organization** - Flat structure, direct imports
- âœ“ **Concise types** - Direct schema definitions
- âœ“ **Flat structure** - Import types directly: `BulkVoyageCreateDto`
- âœ“ **Uses type aliases** - TypeScript type declarations
- âœ“ **More compact** - 61% smaller type definitions

**Best for**: When you want simple, direct access to schema types.

## Type Usage Examples

### openapi-typescript (Path-based)
```typescript
import type { paths } from './output-openapi-typescript/types';

// Access types through paths
type CreateRequest = paths['/api/v5/Voyage/Bulk/Create']['post']['requestBody']['content']['application/json'];
type CreateResponse = paths['/api/v5/Voyage/Bulk/Create']['post']['responses']['202']['content']['application/json'];
```

### @hey-api/openapi-ts (Schema-based)
```typescript
import type { BulkVoyageCreateDto, BulkVoyageResponseDto } from './output-hey-api/types.gen';

// Direct type imports
const data: BulkVoyageCreateDto[] = [...];
const response: BulkVoyageResponseDto = await api.createVoyage(data);
```

## When to Use Which?

**Use openapi-typescript if:**
- You need full endpoint context (request/response/params in one place)
- You prefer nested, structured types that mirror OpenAPI spec
- You want to see all endpoint metadata in types
- You're comfortable with longer type paths

**Use @hey-api/openapi-ts if:**
- You want simple, direct imports of schema types
- You prefer flat, easy-to-navigate type definitions
- You want more compact type files (61% smaller)
- You like TypeScript type aliases over interfaces

## Requirements

- Node.js 18+ (for built-in fetch support)
- No installation needed - uses `npx` to run generators

## Example: Viewing Generated Code

After running `npm run gen:all`, you can explore:

```bash
# View openapi-typescript output
cat output-openapi-typescript/types.ts

# View hey-api output structure
ls -la output-hey-api/

# View hey-api types
cat output-hey-api/types.gen.ts

# View hey-api services
cat output-hey-api/sdk.gen.ts
```

## ðŸ“š Additional Documentation

- **[QUICKSTART.md](QUICKSTART.md)** - Get started in 60 seconds
- **[VISUAL_COMPARISON.md](VISUAL_COMPARISON.md)** - Visual diagrams and architecture comparison
- **[PROJECT_SUMMARY.md](PROJECT_SUMMARY.md)** - Complete project overview
- **[COMPARISON_REPORT.md](COMPARISON_REPORT.md)** - Detailed analysis (auto-generated)

